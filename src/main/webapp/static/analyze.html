<html><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
    <script type="text/javascript" src="http://netdna.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <script src="https://d3js.org/d3-path.v1.min.js"></script>
    <script src="https://d3js.org/d3-shape.v1.min.js"></script>
    <script src="http://d3js.org/d3.v3.min.js"></script>

<!--
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.3.3/d3.min.js" charset="utf-8"></script>
    <script type="text/javascript" src="http://dc-js.github.io/dc.js/js/dc.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/crossfilter/1.3.1/crossfilter.min.js"></script>
    <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/moment.js/2.7.0/moment.min.js"></script>
    <link rel="stylesheet" type="text/css" href="http://dc-js.github.io/dc.js/css/dc.css"/>

-->
    <link href="http://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="http://pingendo.github.io/pingendo-bootstrap/themes/default/bootstrap.css" rel="stylesheet" type="text/css">
<!--
<style>

svg,
canvas {
  position: absolute;
}

</style>
-->
<style>

td, th {
  padding: 1px 50px;
}

.axis path,
.axis line {
  fill: none;
  stroke: #000;
  shape-rendering: crispEdges;
}

.dot {
  stroke: #000;
}

.tooltip {
  position: absolute;
  width: 200px;
  height: 28px;
  pointer-events: none;
}
</style>

  </head>
  <body>
    <div class="section">
      <div class="container">
        <div class="row">
          <div class="col-md-12">
            <ul class="nav nav-tabs">
              <li class="active"></li>
              <li>
                <a href="./index.html">Home</a>
              </li>
              <li class="active">
                <a href="./analyze.html"><i class="fa fa-fw fa-angle-double-right"></i>Analyze a State</a>
              </li>
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Learn More&nbsp;<i class="fa fa-caret-down"></i></a>
                <ul class="dropdown-menu" role="menu">
                  <li>
                    <a href="./learn_home.html">Home Page</a>
                  </li>
                  <li class="divider"></li>
                  <li>
                    <a href="./learn_tests.html">How Tests Work</a>
                  </li>
                  <li class="divider"></li>
                  <li>
                    <a href="./learn_legal.html">Legal Efforts </a>
                  </li>
                </ul>
              </li>
              <li>
                <a href="./contact.html">Contact</a>
              </li>
              <li>
                <a href="./whatif.html">What If?</a>
              </li>
            </ul>
            <a href="#"><i class="fa fa-fw fa-lg fa-toggle-off"></i></a>
          </div>
        </div>
      </div>
    </div>
    <div class="carousel slide" id="carousel-example" data-interval="false" data-ride="carousel">
      <div class="carousel-inner">
        <div class="item active">
          <img src="https://ununsplash.imgix.net/photo-1413912623716-e6c688db0383?w=1024&amp;q=50&amp;fm=jpg&amp;s=2777ec88322e8725978f0fa956735021">
          <div class="carousel-caption">
            <h2>Gerrymandering in the United States</h2>
          </div>
        </div>
        <div class="item">
          <img src="https://ununsplash.imgix.net/photo-1413896235942-39c2eb7cd584?w=1024&amp;q=50&amp;fm=jpg&amp;s=82734c02c2c6a780dc31f24c54077dd6">
          <div class="carousel-caption">
            <h2>Title</h2>
            <p>Description</p>
          </div>
        </div>
        <div class="item">
          <img src="https://ununsplash.imgix.net/uploads/14127101912749510b8ed/82743738?w=1024&amp;q=50&amp;fm=jpg&amp;s=2150993787c74416103059d6ebac09f5">
          <div class="carousel-caption">
            <h2>Title</h2>
            <p>Description</p>
          </div>
        </div>
        <div class="item">
          <img src="https://unsplash.imgix.net/photo-1413920346627-a4389f0abd61?w=1024&amp;q=50&amp;fm=jpg&amp;s=cfd43f65c77577abb3bf29c0d6a0775f">
          <div class="carousel-caption">
            <h2>Title</h2>
            <p>Description</p>
          </div>
        </div>
        <div class="item">
          <img src="https://unsplash.imgix.net/reserve/fqUehZ3ZRru2Kh11qDBT_IMG_0042.jpg?w=1024&amp;q=50&amp;fm=jpg&amp;s=e96c5bfe57acbd6cdfdbe7d84f37656d">
          <div class="carousel-caption">
            <h2>Title</h2>
            <p>Description</p>
          </div>
        </div>
      </div>
      <a class="left carousel-control" href="#carousel-example" data-slide="prev"><i class="icon-prev  fa fa-angle-left"></i></a>
      <a class="right carousel-control" href="#carousel-example" data-slide="next"><i class="icon-next fa fa-angle-right"></i></a>
    </div>
    <div class="section">
      <div class="section">
        <div class="container">
          <div class="row">
            <div class="col-md-6">
              <br>
              
              <iframe style="width: 100%; height:400px" src="/www/searchbox.html"></iframe> 
               
               
            </div>
            <div class="col-md-6">
              <select id="box1" onChange="myFunction(this);" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" style="margin-right:10px">
              <option value="98">New York</option>
              <option value="7122">North Carolina</option>
              <option value="142">Virginia</option>
              </select>
              <select id="box2" onChange="myNewFunction(this);" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" style="margin-right:10px">
              <option value="98">2016</option>
              <option value="142">2014</option>
              <option value="142">2012</option>
              <option value="142">2010</option>
              <option value="142">2008</option>
              <option value="142">2006</option>
              <option value="142">2004</option>
              <option value="142">2002</option>
              <option value="142">2000</option>
              </select>
              <a class="btn btn-primary dropdown-toggle" href="./basic user redistricting.html">Make Super Districts&nbsp;</a>
              <div id="selection"></div>
              
               
              
              <p>
                <br/>
                Choose Your Next State
              </p>
                <a class="btn btn-primary btn-sm" contenteditable="true" style="margin-right:10px">&nbsp; &nbsp; &nbsp; Read &nbsp;More &nbsp; &nbsp;</a>
              <a class="btn btn-primary btn-sm" style="margin-right:10px">&nbsp; &nbsp;Run Analysis- Congressional District&nbsp;</a>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="section">
      <div class="section">
        <div class="container">
          <div class="row">
            <div class="col-md-1">
              <a href="./analyze.html"><i class="fa fa-5x fa-fw fa-toggle-on"></i></a>
            </div>
            <div class="col-md-5">
              <h1>Three Test Simulation</h1>
            </div>
            <div class="col-md-1">
              <a href="./efficiency_gap.html"><i class="fa fa-5x fa-fw fa-toggle-off"></i></a>
            </div>
            <div class="col-md-5">
              <h1>Efficiency Gap Simulation</h1>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="section">
      <div class="container">
        <div class="row">
          <div class="col-md-12">
            <h1 class="text-primary">&nbsp; &nbsp; &nbsp;Calculated Votes for the Democrat Party and Republican
              Party</h1>
            
          </div>
          <div class="col-md-12" id= "tableDisplay">
          <!-- create table for displaying results of user selection
              -->
              
              <script>
        
                  d3.json('/resources/js/test.json', function (data) {
                     data = data.filter(function(row) {

                      return row['State'] == filters[0][1] && row['raceYear']==filters[1][1];
      
                  });
                  function tabulate(data, columns) {
                    var table = d3.select('#tableDisplay').append('table')
                    var thead = table.append('thead')
                    var tbody = table.append('tbody');

                  // append the header row
                  thead.append('tr')
                  .selectAll('th')
                  .data(columns).enter()
                  .append('th')
                  .text(function (column) { return column; });

                   // create a row for each object in the data
                   var rows = tbody.selectAll('tr')
                  .data(data)
                  .enter()
                  .append('tr');

                   // create a cell in each row for each column
                  var cells = rows.selectAll('td')
                  .data(function (row) {
                      return columns.map(function (column) {
                          return {column: column, value: row[column]};
                      });
                    })
                  .enter()
                  .append('td')
                  .text(function (d) { return d.value; });

                     return table;
                  }

                // render the table(s)
                tabulate(data, ['AreaNumber', 'DemVotes','DemStatus','RepVotes','RepStatus', 'Winner' ]); 

              });
              </script>

              
                
            </div>
        </div>
      </div>
    </div>
    <div class="section">
      <div class="container">
        <div class="row">
          <div class="col-md-6">
            <h1 class="text-primary">Lopsided Wins &nbsp;</h1>
            <h2 class="text-danger">FAIL</h2>
            <p>In North Carolina's 2016 election, Republicans won their districts with
              an average of 60.3% percent of the vote, and Democrats won their districts
              with an average of 68.5% percent of the vote. The difference between the
              two parties’ win margins indicates North Carolina may be gerrymandered
              to gain an advantage for Republicans. The chance that this difference would
              have arisen by nonpartisan processes alone is 0.28% (or 1 in 354).
              <br>
              <br>
            </p>
            <a class="btn btn-lg btn-primary" href="./learn_tests.html">Read More</a>
          </div>
          <div class="col-md-6" id="visual">
            

          <script> 

/* secure selections from user as a variable for the tests in display state use case */

              var selectedState;
              var selectedYear;
              var selectedPair;

              function myFunction(element) {
                 selectedState = element.options[element.selectedIndex].text;
              }
              function myNewFunction(element) {
                 selectedYear = element.options[element.selectedIndex].text;
                 selectedPair=[
                 ["State",selectedState],
                 ["raceYear",selectedYear]
                 ];
                 if(selectedState=="New York")
                 {
                    document.getElementById("selection").innerHTML = "State Chosen for "+selectedPair[1][1]+" : "+selectedPair[0][1]+
                    "<p><br/>New York, one of the original 13 colonies, entered the Union in November 1789. The state did not participate in the 1864 election due to secession. Like many other southern states, North Carolina voted almost exclusively Democratic from 1876 through 1964 and almost exclusively Republican beginning in 1968. The initial shift was largely in response to white conservative voter uneasiness with the civil rights legislation passed in the mid-1960s, which was effectively exploited by the Republicans “southern strategy.”<br><br>In 2008, Barack Obama reversed the trend of Republican dominance here (although just barely), defeating John McCain by about 14,000 votes out of 4.3 million cast (49.7% to 49.4%). In percentage terms, it was the 2nd closest race of the 2008 election (behind Missouri). In 2012, North Carolina was again the 2nd closest race (this time behind Florida) as the state flipped Republican. Mitt Romney beat Obama by about 2%. Donald Trump won the state by 3.6% over Hillary Clinton in 2016. Based on population projections,                the state may gain an additional electoral vote after the 2020 presidential election. <br></p>";
                 }
                 else if(selectedState=="North Carolina")
                 {
                    document.getElementById("selection").innerHTML = "State Chosen for "+selectedPair[1][1]+" : "+selectedPair[0][1]+
                    "<p><br/>North Carolina, one of the original 13 colonies, entered the Union in November 1789. The state did not participate in the 1864 election due to secession. Like many other southern states, North Carolina voted almost exclusively Democratic from 1876 through 1964 and almost exclusively Republican beginning in 1968. The initial shift was largely in response to white conservative voter uneasiness with the civil rights legislation passed in the mid-1960s, which was effectively exploited by the Republicans “southern strategy.”<br><br>In 2008, Barack Obama reversed the trend of Republican dominance here (although just barely), defeating John McCain by about 14,000 votes out of 4.3 million cast (49.7% to 49.4%). In percentage terms, it was the 2nd closest race of the 2008 election (behind Missouri). In 2012, North Carolina was again the 2nd closest race (this time behind Florida) as the state flipped Republican. Mitt Romney beat Obama by about 2%. Donald Trump won the state by 3.6% over Hillary Clinton in 2016. Based on population projections,                the state may gain an additional electoral vote after the 2020 presidential election. <br></p>";
                 }
                 else if(selectedState=="Virginia")
                 {
                    document.getElementById("selection").innerHTML = "State Chosen for "+selectedPair[1][1]+" : "+selectedPair[0][1]+
                    "<p><br/>Virginia, one of the original 13 colonies, entered the Union in November 1789. The state did not participate in the 1864 election due to secession. Like many other southern states, North Carolina voted almost exclusively Democratic from 1876 through 1964 and almost exclusively Republican beginning in 1968. The initial shift was largely in response to white conservative voter uneasiness with the civil rights legislation passed in the mid-1960s, which was effectively exploited by the Republicans “southern strategy.”<br><br>In 2008, Barack Obama reversed the trend of Republican dominance here (although just barely), defeating John McCain by about 14,000 votes out of 4.3 million cast (49.7% to 49.4%). In percentage terms, it was the 2nd closest race of the 2008 election (behind Missouri). In 2012, North Carolina was again the 2nd closest race (this time behind Florida) as the state flipped Republican. Mitt Romney beat Obama by about 2%. Donald Trump won the state by 3.6% over Hillary Clinton in 2016. Based on population projections,                the state may gain an additional electoral vote after the 2020 presidential election. <br></p>";
                 }
                 
                 }
              

/* end of securing selections*/


/* creation of lopsided wins scatter plot*/


var margin = {top: 20, right: 20, bottom: 30, left: 90},
    width = 550 - margin.left - margin.right,
    height = 400 - margin.top - margin.bottom;

/* 
 * value accessor - returns the value to encode for a given data object.
 * scale - maps value to a visual display encoding, such as a pixel position.
 * map function - maps from data value to display value
 * axis - sets up axis
 */ 

// setup x 
var xValue = function(d) { return d["Dem Vote %"];}, // data -> value
    xScale = d3.scale.linear().range([0, width]), // value -> display
    xMap = function(d) { return xScale(xValue(d));}, // data -> display
    xAxis = d3.svg.axis().scale(xScale).orient("bottom");

// setup y
var yValue = function(e) {
      return typeof e.DemVotes === 'string' ? parseInt(e.DemVotes.replace(",", "")) : e.DemVotes; 
     }, // data -> value
    yScale = d3.scale.linear().range([height, 0]), // value -> display
    yMap = function(d) { return yScale(yValue(d));}, // data -> display
    yAxis = d3.svg.axis().scale(yScale).orient("left");

//set up values for Republican Won districts
var republicanValues = function(e) {
      return typeof e.RepVotes === 'string' ? parseInt(e.RepVotes.replace(",", "")) : e.RepVotes; 
     }

// setup fill color
var cValue = function(d) { return d.Winner;},
    color = d3.scale.category10();

// add the graph canvas to the body of the webpage
var svg1 = d3.select("#visual").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
    .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

// add the tooltip area to the webpage
var tooltip = d3.select("body").append("div")
    .attr("class", "tooltip")
    .style("opacity", 0);

//data chosen by user for display state use case 

   var counter;
   var demVotePercentage;
  d3.json("/resources/js/test.json", function(data) {
  data = data.filter(function(row) {

        return row['State'] == filters[0][1] && row['raceYear']==filters[1][1];
      
    });
  demVotePercentage = data.map((e) => {return e['Dem Vote %'];});

  console.log("data.length: " + data.length);


  // don't want dots overlapping axis, so add in buffer to data domain
  console.log("data.length: " + data.length);
  console.log(data);
 
  xScale.domain([0, d3.max(data, xValue)+0.2]);
  
  console.log("yValue: " + yValue);
  yScale.domain([0, d3.max(data, yValue )]);

  // x-axis
  svg1.append("g")
      .attr("class", "x axis")
      .attr("transform", "translate(0," + height + ")")
      .call(xAxis)
    .append("text")
      .attr("class", "label")
      .attr("x", width)
      .attr("y", -6)
      .style("text-anchor", "end")
      .text("Democrat Vote Percentage");

  // y-axis
  svg1.append("g")
      .attr("class", "y axis")
      .call(yAxis)
    .append("text")
      .attr("class", "label")
      .attr("transform", "rotate(-90)")
      .attr("y", 6)
      .attr("dy", ".71em")
      .style("text-anchor", "end")
      .text("Vote Shares");

  // draw dots
  svg1.selectAll(".dot")
      .data(data)
    .enter().append("circle")
      .attr("class", "dot")
      .attr("r", 3.5)
      .attr("cx", xMap)
      .attr("cy", yMap)
      .style("fill", function(d) { return color(cValue(d));}) 
      .on("mouseover", function(d) {
          tooltip.transition()
               .duration(200)
               .style("opacity", .9);
          //if(d.Winner=="D")
          //{
            tooltip.html("District:"+d["AreaNumber"] + "<br/>Dem Vote %:" + xValue(d) 
          + "<br/> Dem Votes: " + yValue(d)+"<br/> Rep Votes:"+republicanValues(d) )
               .style("left", (d3.event.pageX + 5) + "px")
               .style("top", (d3.event.pageY - 28) + "px");
          //}
          /*
          if(d.Winner=="R"){
            tooltip.html("District:"+d["AreaNumber"] + "<br/> Dem Vote %:" + xValue(d) 
          + "<br/> Rep Votes: " + republicanValues(d) )
               .style("left", (d3.event.pageX + 5) + "px")
               .style("top", (d3.event.pageY - 28) + "px");
          }
          */
          
      })
      .on("mouseout", function(d) {
          tooltip.transition()
               .duration(500)
               .style("opacity", 0);
      });

  // draw legend
  var legend = svg1.selectAll(".legend")
      .data(color.domain())
    .enter().append("g")
      .attr("class", "legend")
      .attr("transform", function(d, i) { return "translate(0," + i * 20 + ")"; });

  // draw legend colored rectangles
  legend.append("rect")
      .attr("x", width - 18)
      .attr("width", 18)
      .attr("height", 18)
      .style("fill", color);

  // draw legend text
  legend.append("text")
      .attr("x", width - 24)
      .attr("y", 9)
      .attr("dy", ".35em")
      .style("text-anchor", "end")
      .text(function(d) { return d;})

    
});



</script>


            
          </div>
        </div>
      </div>
    </div>
    <div class="section">
      <div class="container">
        <div class="row">
        <div class="col-md-6" id="vis">
          
          
        
    <!-- scatter zoom plot code   
    <div class="col-md-6">
<svg width="500" height="400"></svg>
<canvas width="500" height="400"></canvas>
-->
 <script>

var margin = {top: 20, right: 20, bottom: 30, left: 90},
    width = 500 - margin.left - margin.right,
    height = 400 - margin.top - margin.bottom;

/* 
 * value accessor - returns the value to encode for a given data object.
 * scale - maps value to a visual display encoding, such as a pixel position.
 * map function - maps from data value to display value
 * axis - sets up axis
 /*
   demVotesArray = data.map((e) => {
      return typeof e.DemVotes === 'string' ? parseInt(e.DemVotes.replace(",", "")) : e.DemVotes;
    });
  
 */ 

// setup x 

var xValue = function(d) {
    return d["Dem Vote %"];
    }, // data -> value
    xScale = d3.scale.linear().range([0, width]), // value -> display
    xMap = function(d) { return xScale(xValue(d));}, // data -> display
    xAxis = d3.svg.axis().scale(xScale).orient("bottom");

// setup y
var yValue = function(e) {
      return typeof e.DemVotes === 'string' ? parseInt(e.DemVotes.replace(",", "")) : e.DemVotes; 
     }, // data -> value
    yScale = d3.scale.linear().range([height, 0]), // value -> display
    yMap = function(d) { return yScale(yValue(d));}, // data -> display
    yAxis = d3.svg.axis().scale(yScale).orient("left");

//set up values for Republican Won districts

var republicanValues = function(e) {
      return typeof e.RepVotes === 'string' ? parseInt(e.RepVotes.replace(",", "")) : e.RepVotes; 
     }

// setup fill color
  var c = [ "#E41A1C", "#377EB8"];



// add the graph canvas to the body of the webpage
var svg = d3.select("#vis").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

// add the tooltip area to the webpage
var tooltip = d3.select("body").append("div")
    .attr("class", "tooltip")
    .style("opacity", 0);

 
  var filters = [
    ['State', 'New York'],
    ['raceYear', '2012']
  ];
  
  var mean;
  var median;
  var sum;
  var counter;
  var demVotePercentage;
  var democratWonState=0;
  var republicanWonState=0; 
  var demVotesArray;
  var repVotesArray;
  var usedToWinDemVotes;
  var wastedDemVotes;
  var usedToWinRepVotes;
  var wastedRepVotes;
  var demDistrictCount=0;
  var repDistrictCount=0;
  var winnerArray;

  d3.json("/resources/js/test.json", function(error, data) {
  if (error) throw error;
  data = data.filter(function(row) {

        return row['State'] == filters[0][1] && row['raceYear']==filters[1][1];
      
    });
  demVotePercentage = data.map((e) => {
    return e['Dem Vote %'];
  });

//calculate mean and median for watermarks on graph
   sum = demVotePercentage.reduce(function(total,amount){

        return total + amount;
      });

    mean = sum/ demVotePercentage.length;
     demVotePercentage.sort();
     if(demVotePercentage.length%2==0)
     {
        var elementA = (demVotePercentage.length/2)-1 ; 
        var elementB = elementA+1;
        var elementSum=demVotePercentage[elementA] + demVotePercentage[elementB];
        median = elementSum/2;
     }
     else{
        var element = parseInt(demVotePercentage.length/2) ; 

        median = demVotePercentage[element];

     } 
  
  console.log("mean: " + mean);
  console.log("median: " + median);
  console.log("data.length: " + data.length);

  // don't want dots overlapping axis, so add in buffer to data domain
  console.log(data);
  

  xScale.domain([0, d3.max(data, xValue)+0.2]);

  yScale.domain([0, d3.max(data, yValue )]);

  // x-axis
  svg.append("g")
      .attr("class", "x axis")
      .attr("transform", "translate(0," + height + ")")
      .call(xAxis)
    .append("text")
      .attr("class", "label")
      .attr("x", width)
      .attr("y", -6)
      .style("text-anchor", "end")
      .text("Vote Percentage");

  // y-axis
  svg.append("g")
      .attr("class", "y axis")
      .call(yAxis)
    .append("text")
      .attr("class", "label")
      .attr("transform", "rotate(-90)")
      .attr("y", 6)
      .attr("dy", ".71em")
      .style("text-anchor", "end")
      .text("Vote Shares");

      
    winnerArray = data.map((e)=>{
      return e['Winner'];
    });


  for(var i=0; i<winnerArray.length; i++)
{
  if(winnerArray[i]=="D")
  {
    demDistrictCount = demDistrictCount+1;
  }
  else if(winnerArray[i]=="R")
  {
    repDistrictCount = repDistrictCount+1;
  }
}
console.log("demDistrictCount: " + demDistrictCount);
console.log("repDistrictCount: " + repDistrictCount);

  if(demDistrictCount>repDistrictCount)
  {
    democratWonState=1;
  }
  else if(demDistrictCount < repDistrictCount)
  {
    republicanWonState=1;
  }

  if(democratWonState==1)
  {
    // draw dots
  svg.selectAll(".dot")
      .data(data)
      .enter().append("circle")
      .attr("class", "dot")
      .attr("r", 3.5)
      .attr("cx", xMap)
      .attr("cy", yMap)
      .style("fill", function(d) { 
        return c[1];
      }) 
      .on("mouseover", function(d) {
          tooltip.transition()
               .duration(200)
               .style("opacity", .9);
          if(d.Winner=="D")
          {
            tooltip.html("District:"+d["AreaNumber"] + "<br/>Dem Vote %:" + xValue(d) 
          + "<br/> Dem Votes: " + yValue(d) )
               .style("left", (d3.event.pageX + 5) + "px")
               .style("top", (d3.event.pageY - 28) + "px");
          }else if(d.Winner=="R"){
            tooltip.html("District:"+d["AreaNumber"] + "<br/> Dem Vote %:" + xValue(d) 
          + "<br/> Rep Votes: " + republicanValues(d) )
               .style("left", (d3.event.pageX + 5) + "px")
               .style("top", (d3.event.pageY - 28) + "px");
          }
          
      })
      .on("mouseout", function(d) {
          tooltip.transition()
               .duration(500)
               .style("opacity", 0);
      });

  // The following displays colored rectangles on the right side that indicate which color corresponds to which party
  /*
  var legend = svg.selectAll(".legend")
    .data(c[1])//.data(color.domain())
    .enter().append("g")
      .attr("class", "legend")
      .attr("transform", function(d, i) { return "translate(0," + i * 30 + ")"; });
*/
  // draw legend colored rectangles
  /*
  legend.append("rect")
      .attr("x", width - 18)
      .attr("width", 18)
      .attr("height", 18)
      .style("fill", c[1]);
*/
  // draw legend text
/*
  legend.append("text")
      .attr("x", width - 24)
      .attr("y", 9)
      .attr("dy", ".35em")
      .style("text-anchor", "end")
      .text(function(d) { return d;}) 
  */

  }

  if(republicanWonState==1)
  {
     // draw dots
  svg.selectAll(".dot")
      .data(data)
      .enter().append("circle")
      .attr("class", "dot")
      .attr("r", 3.5)
      .attr("cx", xMap)
      .attr("cy", yMap)
      .style("fill", function(d) { 
        return c[0];
      }) 
      .on("mouseover", function(d) {
          tooltip.transition()
               .duration(200)
               .style("opacity", .9);
          tooltip.html("District:"+d["AreaNumber"] + "<br/> Dem Vote %:" + xValue(d) 
          + "<br/> Rep Votes: " + republicanValues(d) )
               .style("left", (d3.event.pageX + 5) + "px")
               .style("top", (d3.event.pageY - 28) + "px");
      })
      .on("mouseout", function(d) {
          tooltip.transition()
               .duration(500)
               .style("opacity", 0);
      });

  // The following displays colored rectangles on the right side that indicate which color corresponds to which party
  /*
  var legend = svg.selectAll(".legend")
      .data(c[0])//.data(color.domain())
      .enter().append("g")
      .attr("class", "legend")
      .attr("transform", function(d, i) { return "translate(0," + i * 30 + ")"; });
*/

  // draw legend colored rectangles
  /*
  legend.append("rect")
      .attr("x", width - 18)
      .attr("width", 18)
      .attr("height", 18)
      .style("fill", c[0]);
  */

  // draw legend text
  /*
  legend.append("text")
      .attr("x", width - 24)
      .attr("y", 9)
      .attr("dy", ".35em")
      .style("text-anchor", "end")
      .text(function(d) { return d;})
    */
  }
 
//drawing vertical lines for mean and median
/*
 var lc1 = dc.lineChart("#line1");
var lc2 = dc.lineChart("#line2");

var testdate2 = myCSV[1].date;
var line = d3.svg.line().interpolate('linear');

function draw_verticals(chart, points){
    // merge
      chart.g()
      .select('g.chart-body')
      .selectAll('path.horizontal')
      .data(points).enter()
      .append('path')
      .attr('class', 'horizontal reddot')
      .attr('d', function(d) {
        var x = chart.x()(d);
        return line([
          [x, chart.y().range()[0]],
          [x, chart.y().range()[1]]
        ]);
      });
  
}



draw_verticals(lc1, [mean, height/2]);
draw_verticals(lc1, [mean, height]);
draw_verticals(lc2, [median, height/2]);
draw_verticals(lc2, [median, height]);

*/
});




</script>
         <!--
          <svg id="line1"></svg>
          <svg id="line2"></svg>
      -->

          </div>
  
           <div class="col-md-6">
            <h1 class="text-primary">Consistent Advantage</h1>
            <h2 class="text-danger">FAIL</h2>
            <p>In North Carolina in 2016, the median Democratic vote share was 41.6%,
              the average Democratic vote share was 46.4%, and the difference is 4.8%.
              This difference suggests North Carolina is gerrymandered to gain an advantage
              for Republicans. The chance that this difference would have arisen by nonpartisan
              processes alone is 3.4%.
              <br>
            </p>
            <a class="btn btn-lg btn-primary" href="./learn_tests.html">Read More</a>
          </div>
        </div>
      </div>
    </div>
    <footer class="section section-primary">
      <div class="container">
        <div class="row">
          <div class="col-sm-6">
            <h1>Gerrymandering of the U.S.</h1>
            <p>Lorem ipsum dolor sit amet, consectetur adipisici elit,
              <br>sed eiusmod tempor incidunt ut labore et dolore magna aliqua.
              <br>Ut enim ad minim veniam, quis nostrud</p>
          </div>
          <div class="col-sm-6">
            <p class="text-info text-right">
              <br>
              <br>
            </p>
            <div class="row">
              <div class="col-md-12 hidden-lg hidden-md hidden-sm text-left">
                <a href="#"><i class="fa fa-3x fa-fw fa-instagram text-inverse"></i></a>
                <a href="#"><i class="fa fa-3x fa-fw fa-twitter text-inverse"></i></a>
                <a href="#"><i class="fa fa-3x fa-fw fa-facebook text-inverse"></i></a>
                <a href="#"><i class="fa fa-3x fa-fw fa-github text-inverse"></i></a>
              </div>
            </div>
            <div class="row">
              <div class="col-md-12 hidden-xs text-right">
                <a href="#"><i class="fa fa-3x fa-fw fa-instagram text-inverse"></i></a>
                <a href="#"><i class="fa fa-3x fa-fw fa-twitter text-inverse"></i></a>
                <a href="#"><i class="fa fa-3x fa-fw fa-facebook text-inverse"></i></a>
                <a href="#"><i class="fa fa-3x fa-fw fa-github text-inverse"></i></a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </footer>
</body></html>