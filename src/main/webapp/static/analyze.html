<html><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
    <script type="text/javascript" src="http://netdna.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <script src="https://d3js.org/d3-path.v1.min.js"></script>
    <script src="https://d3js.org/d3-shape.v1.min.js"></script>
    <script src="http://d3js.org/d3.v3.min.js"></script>
    <link href="http://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="http://pingendo.github.io/pingendo-bootstrap/themes/default/bootstrap.css" rel="stylesheet" type="text/css">

<style>

svg,
canvas {
  position: absolute;
}

</style>
    <style>
body {
  font: 11px sans-serif;
}

.axis path,
.axis line {
  fill: none;
  stroke: #000;
  shape-rendering: crispEdges;
}

.dot {
  stroke: #000;
}

.tooltip {
  position: absolute;
  width: 200px;
  height: 28px;
  pointer-events: none;
}
</style>
  </head><body>
    <div class="section">
      <div class="container">
        <div class="row">
          <div class="col-md-12">
            <ul class="nav nav-tabs">
              <li class="active"></li>
              <li>
                <a href="./index.html">Home</a>
              </li>
              <li class="active">
                <a href="./analyze.html"><i class="fa fa-fw fa-angle-double-right"></i>Analyze a State</a>
              </li>
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Learn More&nbsp;<i class="fa fa-caret-down"></i></a>
                <ul class="dropdown-menu" role="menu">
                  <li>
                    <a href="./learn_home.html">Home Page</a>
                  </li>
                  <li class="divider"></li>
                  <li>
                    <a href="./learn_tests.html">How Tests Work</a>
                  </li>
                  <li class="divider"></li>
                  <li>
                    <a href="./learn_legal.html">Legal Efforts </a>
                  </li>
                </ul>
              </li>
              <li>
                <a href="./contact.html">Contact</a>
              </li>
              <li>
                <a href="./whatif.html">What If?</a>
              </li>
            </ul>
            <a href="#"><i class="fa fa-fw fa-lg fa-toggle-off"></i></a>
          </div>
        </div>
      </div>
    </div>
    <div class="carousel slide" id="carousel-example" data-interval="false" data-ride="carousel">
      <div class="carousel-inner">
        <div class="item active">
          <img src="https://ununsplash.imgix.net/photo-1413912623716-e6c688db0383?w=1024&amp;q=50&amp;fm=jpg&amp;s=2777ec88322e8725978f0fa956735021">
          <div class="carousel-caption">
            <h2>Gerrymandering in the United States</h2>
          </div>
        </div>
        <div class="item">
          <img src="https://ununsplash.imgix.net/photo-1413896235942-39c2eb7cd584?w=1024&amp;q=50&amp;fm=jpg&amp;s=82734c02c2c6a780dc31f24c54077dd6">
          <div class="carousel-caption">
            <h2>Title</h2>
            <p>Description</p>
          </div>
        </div>
        <div class="item">
          <img src="https://ununsplash.imgix.net/uploads/14127101912749510b8ed/82743738?w=1024&amp;q=50&amp;fm=jpg&amp;s=2150993787c74416103059d6ebac09f5">
          <div class="carousel-caption">
            <h2>Title</h2>
            <p>Description</p>
          </div>
        </div>
        <div class="item">
          <img src="https://unsplash.imgix.net/photo-1413920346627-a4389f0abd61?w=1024&amp;q=50&amp;fm=jpg&amp;s=cfd43f65c77577abb3bf29c0d6a0775f">
          <div class="carousel-caption">
            <h2>Title</h2>
            <p>Description</p>
          </div>
        </div>
        <div class="item">
          <img src="https://unsplash.imgix.net/reserve/fqUehZ3ZRru2Kh11qDBT_IMG_0042.jpg?w=1024&amp;q=50&amp;fm=jpg&amp;s=e96c5bfe57acbd6cdfdbe7d84f37656d">
          <div class="carousel-caption">
            <h2>Title</h2>
            <p>Description</p>
          </div>
        </div>
      </div>
      <a class="left carousel-control" href="#carousel-example" data-slide="prev"><i class="icon-prev  fa fa-angle-left"></i></a>
      <a class="right carousel-control" href="#carousel-example" data-slide="next"><i class="icon-next fa fa-angle-right"></i></a>
    </div>
    <div class="section">
      <div class="section">
        <div class="container">
          <div class="row">
            <div class="col-md-6">
              <br>
              
              <iframe style="width: 100%; height:400px" src="/www/searchbox.html"></iframe> 
               
               
            </div>
            <div class="col-md-6">
              <select id="box1" onChange="myFunction(this);" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" style="margin-right:10px">
              <option value="98">New York</option>
              <option value="7122">North Carolina</option>
              <option value="142">Virginia</option>
              </select>
              <select id="box2" onChange="myNewFunction(this);" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" style="margin-right:10px">
              <option value="98">2016</option>
              <option value="142">2014</option>
              <option value="142">2012</option>
              <option value="142">2010</option>
              <option value="142">2008</option>
              <option value="142">2006</option>
              <option value="142">2004</option>
              <option value="142">2002</option>
              <option value="142">2000</option>
              </select>
              <a class="btn btn-primary dropdown-toggle" href="./basic user redistricting.html">Make Super Districts&nbsp;</a>
              <div id="selection"></div>
              <!--
              <script>
              var selectedState;
              var selectedYear;
              var selectedPair;

              function myFunction(element) {
                 selectedState = element.options[element.selectedIndex].text;
              }
              function myNewFunction(element) {
                 selectedYear = element.options[element.selectedIndex].text;
                 selectedPair=[
                 ["State",selectedState],
                 ["raceYear",selectedYear]
                 ];
                 document.getElementById("selection").innerHTML = "State Chosen for "+selectedPair[1][1]+" : "+selectedPair[0][1];
                 
              }
              </script>
              -->

               
              
              <p>
                <br/>
                North Carolina, one of the original 13 colonies, entered the Union in
                November 1789. The state did not participate in the 1864 election due to
                secession. Like many other southern states, North Carolina voted almost
                exclusively Democratic from 1876 through 1964 and almost exclusively Republican
                beginning in 1968. The initial shift was largely in response to white conservative
                voter uneasiness with the civil rights legislation passed in the mid-1960s,
                which was effectively exploited by the Republicans “southern strategy.”
                <br>
                <br>In 2008, Barack Obama reversed the trend of Republican dominance here
                (although just barely), defeating John McCain by about 14,000 votes out
                of 4.3 million cast (49.7% to 49.4%). In percentage terms, it was the 2nd
                closest race of the 2008 election (behind Missouri). In 2012, North Carolina
                was again the 2nd closest race (this time behind Florida) as the state
                flipped Republican. Mitt Romney beat Obama by about 2%. Donald Trump won
                the state by 3.6% over Hillary Clinton in 2016. Based on population projections,
                the state may gain an additional electoral vote after the 2020 presidential
                election.
                <br>
              </p>
              <a class="btn btn-primary btn-sm" contenteditable="true" style="margin-right:10px">&nbsp; &nbsp; &nbsp; Read &nbsp;More &nbsp; &nbsp;</a>
              <a class="btn btn-primary btn-sm" style="margin-right:10px">&nbsp; &nbsp;Run Analysis- Congressional District&nbsp;</a>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="section">
      <div class="section">
        <div class="container">
          <div class="row">
            <div class="col-md-1">
              <a href="./analyze.html"><i class="fa fa-5x fa-fw fa-toggle-on"></i></a>
            </div>
            <div class="col-md-5">
              <h1>Three Test Simulation</h1>
            </div>
            <div class="col-md-1">
              <a href="./basic efficiency gap test result.html"><i class="fa fa-5x fa-fw fa-toggle-off"></i></a>
            </div>
            <div class="col-md-5">
              <h1>Efficiency Gap Simulation</h1>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="section">
      <div class="container">
        <div class="row">
          <div class="col-md-6">
            <h1 class="text-primary">Lopsided Wins &nbsp;</h1>
            <h2 class="text-danger">FAIL</h2>
            <p>In North Carolina's 2016 election, Republicans won their districts with
              an average of 60.3% percent of the vote, and Democrats won their districts
              with an average of 68.5% percent of the vote. The difference between the
              two parties’ win margins indicates North Carolina may be gerrymandered
              to gain an advantage for Republicans. The chance that this difference would
              have arisen by nonpartisan processes alone is 0.28% (or 1 in 354).
              <br>
              <br>
            </p>
            <a class="btn btn-lg btn-primary" href="./learn_tests.html">Read More</a>
          </div>
          <div class="col-md-6" style="width: 500px; height:400px">
            <!--
            <img src="./test scatter plot zoom.html" class="img-responsive">
            -->
<!-- scatter zoom plot code -->          
<svg width="500" height="400"></svg>
<canvas width="500" height="400"></canvas>
<script src="http://d3js.org/d3.v4.min.js"></script>
 
<script> 

/* secure selections from user as a variable for the tests in display state use case */

              var selectedState;
              var selectedYear;
              var selectedPair;

              function myFunction(element) {
                 selectedState = element.options[element.selectedIndex].text;
              }
              function myNewFunction(element) {
                 selectedYear = element.options[element.selectedIndex].text;
                 selectedPair=[
                 ["State",selectedState],
                 ["raceYear",selectedYear]
                 ];
                 document.getElementById("selection").innerHTML = "State Chosen for "+selectedPair[1][1]+" : "+selectedPair[0][1];
                 
              }

/* end of securing selections*/
/* creation of zoom tour scatter plot*/

var random = d3.randomNormal(0, 0.2),
    sqrt3 = Math.sqrt(3),
    points0 = d3.range(300).map(function() { return [random() + sqrt3, random() + 1]; }),
    points1 = d3.range(300).map(function() { return [random() - sqrt3, random() + 1]; }),
    pointsets = [points0, points1], 
    points = d3.merge([points0, points1]),
    index = -1;

var context = d3.select("canvas").node().getContext("2d"),
    svg = d3.select("svg"),
    width = +svg.attr("width"),
    height = +svg.attr("height");

var k = height / width,
    x = d3.scaleLinear().domain([-4.5, 4.5]).range([0, width]),
    y = d3.scaleLinear().domain([-4.5 * k, 4.5 * k]).range([height, 0]),
    z = d3.schemeCategory10;

var xAxis = d3.axisTop(x).ticks(12),
    yAxis = d3.axisRight(y).ticks(12 * height / width);

var zoom = d3.zoom()
    .on("zoom", zoomed);

var gx = svg.append("g")
    .attr("class", "axis axis--x")
    .attr("transform", "translate(0," + (height - 10) + ")")
    .call(xAxis);

var gy = svg.append("g")
    .attr("class", "axis axis--y")
    .attr("transform", "translate(10,0)")
    .call(yAxis);

svg.selectAll(".domain")
    .style("display", "none");

svg.call(zoom.transform, d3.zoomIdentity);

d3.interval(function() {
  var pointset = pointsets[index = (index + 1) % (pointsets.length + 1)] || points,
      x0 = x(d3.min(pointset, function(d) { return d[0]; })),
      x1 = x(d3.max(pointset, function(d) { return d[0]; })),
      y0 = y(d3.max(pointset, function(d) { return d[1]; })),
      y1 = y(d3.min(pointset, function(d) { return d[1]; })),
      k = 0.9 / Math.max((x1 - x0) / width, (y1 - y0) / height),
      tx = (width - k * (x0 + x1)) / 2,
      ty = (height - k * (y0 + y1)) / 2;

  svg.transition()
      .duration(1500)
      .call(zoom.transform, d3.zoomIdentity
          .translate(tx, ty)
          .scale(k));
}, 2500);

function zoomed() {
  var transform = d3.event.transform,
      zx = transform.rescaleX(x),
      zy = transform.rescaleY(y);

  gx.call(xAxis.scale(zx));
  gy.call(yAxis.scale(zy));

  context.clearRect(0, 0, width, height);
  for (var j = 0, m = pointsets.length; j < m; ++j) {
    context.beginPath();
    context.fillStyle = d3.schemeCategory10[j];
    for (var points = pointsets[j], i = 0, n = points.length, p, px, py; i < n; ++i) {
      p = points[i], px = zx(p[0]), py = zy(p[1]);
      context.moveTo(px + 2.5, py);
      context.arc(px, py, 2.5, 0, 2 * Math.PI);
    }
    context.fill();
  }
}

</script>


            
          </div>
        </div>
      </div>
    </div>
    <div class="section">
      <div class="container">
        <div class="row">
          <div class="col-md-6" style="width: 500px; height:400px">
          <!--
            <img src="/resources/img/consistent_advantage.png" class="img-responsive">
            -->
    <!-- scatter zoom plot code -->  
<svg width="500" height="400"></svg>
<canvas width="500" height="400"></canvas>
            <script>
var margin = {top: 20, right: 20, bottom: 30, left: 40},
    width = 500 - margin.left - margin.right,
    height = 400 - margin.top - margin.bottom;

/* 
 * value accessor - returns the value to encode for a given data object.
 * scale - maps value to a visual display encoding, such as a pixel position.
 * map function - maps from data value to display value
 * axis - sets up axis
 */ 

// setup x 
var xValue = function(d) { return d["Dem Vote %"];}, // data -> value
    xScale = d3.scale.linear().range([0, width]), // value -> display
    xMap = function(d) { return xScale(xValue(d));}, // data -> display
    xAxis = d3.svg.axis().scale(xScale).orient("bottom");

// setup y
var yValue = function(d) { return Number.parseInt(d["DemVotes"].replace(",","")); }, // data -> value
    yScale = d3.scale.linear().range([height, 0]), // value -> display
    yMap = function(d) { return yScale(yValue(d));}, // data -> display
    yAxis = d3.svg.axis().scale(yScale).orient("left");

// setup fill color
var cValue = function(d) { return d.Manufacturer;},
    color = d3.scale.category10();

// add the graph canvas to the body of the webpage
var svg = d3.select("body").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

// add the tooltip area to the webpage
var tooltip = d3.select("body").append("div")
    .attr("class", "tooltip")
    .style("opacity", 0);





// load data

//data chosen by user for display state use case 
/* secure selections from user as a variable for the tests in display state use case */
              /*
              var selectedState;
              var selectedYear;
              var selectedPair;

              function myFunction(element) {
                 selectedState = element.options[element.selectedIndex].text;
              }
              function myNewFunction(element) {
                 selectedYear = element.options[element.selectedIndex].text;
                 selectedPair=[
                 ['State',selectedState],
                 ['raceYear',selectedYear]
                 ];
                 document.getElementById("selection").innerHTML = "State Chosen for "+selectedPair[1][1]+" : "+selectedPair[0][1];
                 
              }
              */
/* end of securing selections*/

  
  var filters = [
    ['State', 'New York'],
    ['raceYear', '2012']
  ];
  
   var mean;
   var median;
   var sum;
   var counter;
   var demVotePercentage;
  d3.json("./test.json", function(error, data) {
  if (error) throw error;
  data = data.filter(function(row) {

        return row['State'] == filters[0][1] && row['raceYear']==filters[1][1];
      
    });
  demVotePercentage = data.map((e) => {return e['Dem Vote %'];});

   sum = demVotePercentage.reduce(function(total,amount){

        return total + amount;
      });

    mean = sum/ demVotePercentage.length;
     demVotePercentage.sort();
     if(demVotePercentage.length%2==0)
     {
        var elementA = (demVotePercentage.length/2)-1 ; 
        var elementB = elementA+1;
        var elementSum=demVotePercentage[elementA] + demVotePercentage[elementB];
        median = elementSum/2;
     }
     else{
        var element = parseInt(demVotePercentage.length/2) ; 

        median = demVotePercentage[element];

     } 



  console.log("data.length: " + data.length);

  /*data.forEach(function(d) {
    d["Dem Vote %"] = +d["Dem Vote %"];
    d["DemVotes"] = +d["DemVotes"];
  });*/

  

  // don't want dots overlapping axis, so add in buffer to data domain
  console.log("data.length: " + data.length);
  console.log(data);
  console.log(data.map(function(d) { return Number.parseInt(d["DemVotes"].replace(",","")); } ));
  xScale.domain([0, d3.max(data, xValue)+0.2]);
  console.log("Max yValue: " + d3.max(data, function(d) { return Number.parseInt(d["DemVotes"].replace(",","")); } ));
  console.log("yValue: " + yValue);
  yScale.domain([0, d3.max(data, yValue )]);

  // x-axis
  svg.append("g")
      .attr("class", "x axis")
      .attr("transform", "translate(0," + height + ")")
      .call(xAxis)
    .append("text")
      .attr("class", "label")
      .attr("x", width)
      .attr("y", -6)
      .style("text-anchor", "end")
      .text("Democratic Vote %");

  // y-axis
  svg.append("g")
      .attr("class", "y axis")
      .call(yAxis)
    .append("text")
      .attr("class", "label")
      .attr("transform", "rotate(-90)")
      .attr("y", 6)
      .attr("dy", ".71em")
      .style("text-anchor", "end")
      .text("Vote Shares");

  // draw dots
  svg.selectAll(".dot")
      .data(data)
    .enter().append("circle")
      .attr("class", "dot")
      .attr("r", 3.5)
      .attr("cx", xMap)
      .attr("cy", yMap)
      .style("fill", function(d) { return color(cValue(d));}) 
      .on("mouseover", function(d) {
          tooltip.transition()
               .duration(200)
               .style("opacity", .9);
          tooltip.html(d["AreaNumber"] + "<br/> (" + xValue(d) 
          + ", " + yValue(d) + ")")
               .style("left", (d3.event.pageX + 5) + "px")
               .style("top", (d3.event.pageY - 28) + "px");
      })
      .on("mouseout", function(d) {
          tooltip.transition()
               .duration(500)
               .style("opacity", 0);
      });

  // draw legend
  var legend = svg.selectAll(".legend")
      .data(color.domain())
    .enter().append("g")
      .attr("class", "legend")
      .attr("transform", function(d, i) { return "translate(0," + i * 20 + ")"; });

  // draw legend colored rectangles
  legend.append("rect")
      .attr("x", width - 18)
      .attr("width", 18)
      .attr("height", 18)
      .style("fill", color);

  // draw legend text
  legend.append("text")
      .attr("x", width - 24)
      .attr("y", 9)
      .attr("dy", ".35em")
      .style("text-anchor", "end")
      .text(function(d) { return d;})
});

</script>
          </div>
          <div class="col-md-6">
            <h1 class="text-primary">Consistent Advantage</h1>
            <h2 class="text-danger">FAIL</h2>
            <p>In North Carolina in 2016, the median Democratic vote share was 41.6%,
              the average Democratic vote share was 46.4%, and the difference is 4.8%.
              This difference suggests North Carolina is gerrymandered to gain an advantage
              for Republicans. The chance that this difference would have arisen by nonpartisan
              processes alone is 3.4%.
              <br>
            </p>
            <a class="btn btn-lg btn-primary" href="./learn_tests.html">Read More</a>
          </div>
        </div>
      </div>
    </div>
    <footer class="section section-primary">
      <div class="container">
        <div class="row">
          <div class="col-sm-6">
            <h1>Gerrymandering of the U.S.</h1>
            <p>Lorem ipsum dolor sit amet, consectetur adipisici elit,
              <br>sed eiusmod tempor incidunt ut labore et dolore magna aliqua.
              <br>Ut enim ad minim veniam, quis nostrud</p>
          </div>
          <div class="col-sm-6">
            <p class="text-info text-right">
              <br>
              <br>
            </p>
            <div class="row">
              <div class="col-md-12 hidden-lg hidden-md hidden-sm text-left">
                <a href="#"><i class="fa fa-3x fa-fw fa-instagram text-inverse"></i></a>
                <a href="#"><i class="fa fa-3x fa-fw fa-twitter text-inverse"></i></a>
                <a href="#"><i class="fa fa-3x fa-fw fa-facebook text-inverse"></i></a>
                <a href="#"><i class="fa fa-3x fa-fw fa-github text-inverse"></i></a>
              </div>
            </div>
            <div class="row">
              <div class="col-md-12 hidden-xs text-right">
                <a href="#"><i class="fa fa-3x fa-fw fa-instagram text-inverse"></i></a>
                <a href="#"><i class="fa fa-3x fa-fw fa-twitter text-inverse"></i></a>
                <a href="#"><i class="fa fa-3x fa-fw fa-facebook text-inverse"></i></a>
                <a href="#"><i class="fa fa-3x fa-fw fa-github text-inverse"></i></a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </footer>
</body></html>